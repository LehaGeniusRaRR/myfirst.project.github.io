<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ö–æ–Ω—Ç–∞–∫—Ç—ã - –§–æ—Ç–æ—Å—Ç—É–¥–∏—è LightArt</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">
</head>
<body>
  <header>
    <nav class="main-nav">
      <a href="index.html" class="logo">
        <img src="img/logo.svg" alt="–õ–æ–≥–æ—Ç–∏–ø LightArt" width="48" height="48">
        <span>LightArt</span>
      </a>
      <ul class="nav-list" id="navList">
        <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
        <li><a href="services.html">–£—Å–ª—É–≥–∏</a></li>
        <li><a href="about.html">–û –Ω–∞—Å</a></li>
        <li><a href="contacts.html" aria-current="page">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
      </ul>
      <button class="nav-toggle" id="navToggle" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </button>
    </nav>
  </header>
  <section class="booking-form-section">
    <div class="booking-form-container">
      <h2 class="booking-form-title">–ü—Ä–∏—ë–º –∑–∞–∫–∞–∑–æ–≤ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤</h2>
      <p class="booking-form-subtitle">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É, —á—Ç–æ–±—ã –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å—ä—ë–º–∫—É –∏–ª–∏ –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å. –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.</p>
      <form class="booking-form">
        <div class="form-group">
          <label for="name">–í–∞—à–µ –∏–º—è</label>
          <input type="text" id="name" name="name" placeholder="–ò–≤–∞–Ω" required>
        </div>
        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" name="email" placeholder="example@mail.com" required>
        </div>
        
        <div class="form-group">
          <label>–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥–∏</label>
          <div id="services-container" class="services-checkbox-container">
            <!-- Checkboxes will be populated dynamically -->
            <p class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞ —É—Å–ª—É–≥...</p>
          </div>
        </div>

        <div id="calculators-container">
          <!-- Dynamic calculators will be inserted here -->
        </div>

        <div class="total-cost-container">
          <span class="total-cost-label">–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</span>
          <span id="total-cost-output" class="total-cost-value">0 BYN</span>
        </div>

        <div class="form-group">
          <label for="message">–í–∞—à–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è</label>
          <textarea id="message" name="message" rows="4" placeholder="–û–ø–∏—à–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ –≤–∞—à–µ–π —Å—ä—ë–º–∫–∏, –∂–µ–ª–∞–µ–º—É—é –¥–∞—Ç—É –∏–ª–∏ –∑–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å..." maxlength="500"></textarea>
          <div class="char-counter-container">
            <span id="char-counter">500</span> —Å–∏–º–≤–æ–ª–æ–≤ –æ—Å—Ç–∞–ª–æ—Å—å
          </div>
        </div>
        <div class="form-group">
          <label for="file-upload" class="file-upload-label">–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ã</label>
          <input type="file" id="file-upload" multiple style="display: none;">
          <span id="file-upload-filename">–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω</span>
        </div>
        <button type="submit" class="form-submit-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
      </form>
    </div>
  </section>
  
  <!-- –ë–ª–æ–∫ —Å –∫–∞—Ä—Ç–æ–π -->
  <section class="map-section">
    <div class="map-container">
      <h2 class="map-title">–ù–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</h2>
      <p class="map-subtitle">–ú—ã –Ω–∞—Ö–æ–¥–∏–º—Å—è –≤ —Ü–µ–Ω—Ç—Ä–µ –ú–∏–Ω—Å–∫–∞, —Ä—è–¥–æ–º —Å –ë–ì–¢–£</p>
      <div class="map-wrapper">
        <div id="map" class="map"></div>
        <div class="map-info">
          <div class="map-info-item">
            <div class="info-icon">üìç</div>
            <div class="info-content">
              <h3>–ê–¥—Ä–µ—Å</h3>
              <p>–≥. –ú–∏–Ω—Å–∫, —É–ª. –ë–æ–±—Ä—É–π—Å–∫–∞—è, 5</p>
              <span class="info-note">(—Ä—è–¥–æ–º —Å –ë–ì–¢–£)</span>
            </div>
          </div>
          <div class="map-info-item">
            <div class="info-icon">üöá</div>
            <div class="info-content">
              <h3>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</h3>
              <p>–ú–µ—Ç—Ä–æ: –í–æ–∫–∑–∞–ª—å–Ω–∞—è</p>
              <p>–ê–≤—Ç–æ–±—É—Å: 1, 100, 119</p>
            </div>
          </div>
          <div class="map-info-item">
            <div class="info-icon">üïí</div>
            <div class="info-content">
              <h3>–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã</h3>
              <p>–ü–Ω-–ü—Ç: 9:00 - 20:00</p>
              <p>–°–±-–í—Å: 10:00 - 18:00</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="site-footer">
    <div class="footer-container">
        <div class="footer-column footer-about">
            <h4>LightArt</h4>
            <p>–í–∞—à–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞ –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏. –ú—ã —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ª—É—á—à–∏–µ –º–æ–º–µ–Ω—Ç—ã.</p>
        </div>
        <div class="footer-column footer-links">
            <h4>–ö–∞—Ä—Ç–∞ —Å–∞–π—Ç–∞</h4>
            <ul>
                <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><a href="services.html">–£—Å–ª—É–≥–∏</a></li>
                <li><a href="about.html">–û –Ω–∞—Å</a></li>
                <li><a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
            </ul>
        </div>
        <div class="footer-column footer-contact">
            <h4>–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏</h4>
            <p>–≥. –ú–∏–Ω—Å–∫, —É–ª. –ë–æ–±—Ä—É–π—Å–∫–∞—è, 5</p>
            <p><a href="tel:+375291234567">+375 (29) 123-45-67</a></p>
            <p><a href="mailto:info@lightart.by">info@lightart.by</a></p>
        </div>
        <div class="footer-column footer-social">
            <h4>–ú—ã –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö</h4>
            <div class="social-icons">
                <a href="#" aria-label="Instagram">
                    <svg viewBox="0 0 24 24"><path d="M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2A5.2,5.2 0,0 1,16.2 22H7.8C4.6,22 2,19.4 2,16.2V7.8A5.2,5.2 0,0 1,7.8 2M7.6,4A3.6,3.6 0,0 0,4 7.6V16.4A3.6,3.6 0,0 0,7.6 20H16.4A3.6,3.6 0,0 0,20 16.4V7.6A3.6,3.6 0,0 0,16.4 4H7.6M17.25,5.5A1.25,1.25 0,1 0,18.5 6.75,1.25 1.25,0 0,0 17.25 5.5M12,7A5,5 0,1 0,17 12,5 5,0 0,0 12 7M12,9A3,3 0,1 1,9 12,3 3,0 0,1 12 9Z"></path></svg>
                </a>
                <a href="#" aria-label="Facebook">
                    <svg viewBox="0 0 24 24"><path d="M13.397 20.997v-8.196h2.765l.411-3.209h-3.176V7.548c0-.926.258-1.56 1.587-1.56h1.684V3.127A22.336 22.336 0 0 0 14.201 3c-2.444 0-4.122 1.492-4.122 4.231v2.355H7.332v3.209h2.753v8.196h3.312z"></path></svg>
                </a>
                <a href="#" aria-label="Telegram">
                    <svg viewBox="0 0 24 24"><path d="M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"/></svg>
                </a>
            </div>
        </div>
    </div>
    <div class="footer-bottom">
        <p>&copy; 2025 LightArt. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </div>
  </footer>
  <div id="services-cart" class="services-cart">
    <div class="cart-icon" id="cart-icon">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
        <line x1="3" y1="6" x2="21" y2="6"/>
        <path d="M16 10a4 4 0 0 1-8 0"/>
      </svg>
      <span class="cart-count" id="cart-count">0</span>
    </div>
    <div class="cart-dropdown" id="cart-dropdown">
      <div class="cart-header">
        <h3>–ö–æ—Ä–∑–∏–Ω–∞ —É—Å–ª—É–≥</h3>
        <button class="cart-close" id="cart-close">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="cart-items" id="cart-items">
        <p class="cart-empty">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>
      </div>
      <div class="cart-footer">
        <button class="cart-checkout-btn" id="cart-checkout-btn" disabled>
          –ü–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–∫–∞–∑—É
        </button>
      </div>
    </div>
  </div>
  <script src="js/navigation.js"></script>
  <script src="js/cart.js"></script>
  <script src="js/main.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã
    document.addEventListener('DOMContentLoaded', function() {
      // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ë–ì–¢–£ –≤ –ú–∏–Ω—Å–∫–µ
      const bstuCoords = [53.9023, 27.5618];
      
      // –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç—É
      const map = L.map('map').setView(bstuCoords, 16);
      
      // –î–æ–±–∞–≤–ª—è–µ–º —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã–π —Å–ª–æ–π
      L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        attribution: '¬© Esri, Maxar, Earthstar Geographics, and the GIS User Community'
      }).addTo(map);
      
      // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª–æ–π —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ —É–ª–∏—Ü –ø–æ–≤–µ—Ä—Ö —Å–ø—É—Ç–Ω–∏–∫–∞
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '¬© OpenStreetMap contributors',
        opacity: 0.3
      }).addTo(map);
      
      // –î–æ–±–∞–≤–ª—è–µ–º –º–∞—Ä–∫–µ—Ä —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π –∏–∫–æ–Ω–∫–æ–π
      const customIcon = L.divIcon({
        className: 'custom-marker',
        html: '<div style="background: #667eea; width: 30px; height: 30px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 10px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center;"><span style="color: white; font-size: 16px;">üì∏</span></div>',
        iconSize: [30, 30],
        iconAnchor: [15, 30],
        popupAnchor: [0, -30]
      });
      
      const marker = L.marker(bstuCoords, {icon: customIcon}).addTo(map);
      
      // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ
      marker.bindPopup(`
        <div style="text-align: center; padding: 10px;">
          <h3 style="margin: 0 0 10px 0; color: #333;">–§–æ—Ç–æ—Å—Ç—É–¥–∏—è LightArt</h3>
          <p style="margin: 0; color: #666;">–≥. –ú–∏–Ω—Å–∫, —É–ª. –ë–æ–±—Ä—É–π—Å–∫–∞—è, 5</p>
          <p style="margin: 5px 0 0 0; color: #666;">(—Ä—è–¥–æ–º —Å –ë–ì–¢–£)</p>
        </div>
      `);
      
      // –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–∞—Ä—Ç—ã
      function resizeMap() {
        map.invalidateSize();
      }
      
      // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –∫–∞—Ä—Ç—É –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
      window.addEventListener('resize', resizeMap);
      
      // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
      setTimeout(resizeMap, 100);
    });

    // Script to pre-select service from URL and cart
    document.addEventListener('DOMContentLoaded', function() {
        const urlParams = new URLSearchParams(window.location.search);
        const serviceToSelect = urlParams.get('service');
        const cartServices = urlParams.get('cart');

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–º–µ—Ç–∫–∏ —É—Å–ª—É–≥
        function markServices(serviceIds) {
            const observer = new MutationObserver((mutationsList, observer) => {
                for(const mutation of mutationsList) {
                    if (mutation.type === 'childList') {
                        const servicesContainer = document.getElementById('services-container');
                        const checkboxes = servicesContainer.querySelectorAll('input[type="checkbox"]');
                        
                        if (checkboxes.length > 0) {
                            let servicesFound = 0;
                            checkboxes.forEach(checkbox => {
                                if (serviceIds.includes(checkbox.value)) {
                                    checkbox.checked = true;
                                    servicesFound++;
                                    // Manually trigger change event to update calculators and total cost
                                    checkbox.dispatchEvent(new Event('change'));
                                }
                            });
                            
                            if (servicesFound > 0) {
                                // Notification logic can be added here if needed
                            }
                            
                            observer.disconnect();
                            break;
                        }
                    }
                }
            });

            const targetNode = document.getElementById('services-container');
            if (targetNode) {
                observer.observe(targetNode, { childList: true, subtree: true });
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã –∏–∑ localStorage
        function loadCartFromStorage() {
            const saved = localStorage.getItem('lightart-cart');
            if (saved) {
                try {
                    const cartItems = JSON.parse(saved);
                    if (Array.isArray(cartItems) && cartItems.length > 0) {
                        const serviceIds = cartItems.map(item => item.id);
                        markServices(serviceIds);
                        return true;
                    }
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã:', e);
                }
            }
            return false;
        }

        if (cartServices) {
            const serviceIds = cartServices.split(',');
            markServices(serviceIds);
        } else {
            loadCartFromStorage();
        }
    });
  </script>
</body>
</html> 